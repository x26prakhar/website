---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime()).slice(0, 3);

function formatDate(date: Date) {
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
}
---

<BaseLayout title="Prakhar Singh - Storyteller & Content Professional">
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="hero-greeting animated">Hello, I'm Prakhar Singh.</h1>
            <img src="/images/profile.jpg" alt="Prakhar Singh" class="hero-image">
        </div>
    </section>

    <!-- About Section -->
    <section class="about">
        <div class="container">
            <p>
                I'm a storyteller and a content person who's spent over 8 years writing, producing, and shipping stories across formats. Over the past few years, I've built and scaled <a href="#">Elevation Capital's</a> content engine from the ground up.
            </p>
            <p>
                Previously, I was at <a href="#">Business Standard</a> (launched <em>The Morning Show</em>), <a href="#">Paytm</a> (Corporate Communications), and <a href="#">Inshorts</a> (Business News Editor).
            </p>
            <p>
                The best storytelling builds trust, shapes perception, and compounds over time. It can create a lasting connection with an audience that goes beyond simple information sharing.
            </p>
            <p>
                Outside of work, I write about consumer trends, AI, marketing, and Indian startups. Feel free to <a href="/contact">reach out</a> if you'd like to chat.
            </p>
        </div>
    </section>

    <!-- Recent Posts Section -->
    <section class="posts-section">
        <div class="container">
            <h2 class="section-title">Recent Posts</h2>
            <div class="posts-list">
                {sortedPosts.map((post) => (
                    <article class="post-card">
                        <a href={`/posts/${post.slug}`}>
                            <h3 class="post-title">{post.data.title}</h3>
                            <p class="post-date">{formatDate(post.data.date)}</p>
                            <p class="post-excerpt">{post.data.excerpt}</p>
                            <span class="post-category">{post.data.category}</span>
                        </a>
                    </article>
                ))}
            </div>
            <a href="/writing" class="view-all">View all posts â†’</a>
        </div>
    </section>
</BaseLayout>
