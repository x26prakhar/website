---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

function formatDate(date: Date) {
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
}
---

<BaseLayout title="Writing - Prakhar Singh" description="Articles about startups, AI, marketing, and consumer trends in India.">
    <section class="posts-section">
        <div class="container">
            <h1 class="section-title">Writing</h1>
            <div class="posts-list">
                {sortedPosts.map((post) => (
                    <article class="post-card">
                        <a href={`/posts/${post.slug}`}>
                            <h3 class="post-title">{post.data.title}</h3>
                            <p class="post-date">{formatDate(post.data.date)}</p>
                            <p class="post-excerpt">{post.data.excerpt}</p>
                            <span class="post-category">{post.data.category}</span>
                        </a>
                    </article>
                ))}
            </div>
        </div>
    </section>
</BaseLayout>
