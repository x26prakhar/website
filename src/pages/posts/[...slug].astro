---
import { getCollection, type CollectionEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

interface Props {
  post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;
const { Content } = await post.render();

function formatDate(date: Date) {
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
}
---

<BaseLayout title={`${post.data.title} - Prakhar Singh`} description={post.data.excerpt}>
    <!-- Post Header -->
    <header class="post-header">
        <div class="container">
            <span class="post-category">{post.data.category}</span>
            <h1 class="post-title">{post.data.title}</h1>
            <p class="post-date">{formatDate(post.data.date)}</p>
        </div>
    </header>

    <!-- Post Content -->
    <article class="post-content">
        <div class="container">
            <Content />
        </div>
    </article>

    <!-- Post Navigation -->
    <nav class="post-nav">
        <div class="container">
            <a href="/writing">‚Üê Back to Writing</a>
        </div>
    </nav>
</BaseLayout>
